# .bashrc

# Source global definitions
if [ -f /etc/bashrc ]; then
        . /etc/bashrc
fi

# User specific environment
if ! [[ "$PATH" =~ "$HOME/.local/bin:$HOME/bin:" ]]
then
    PATH="$HOME/.local/bin:$HOME/bin:$PATH"
fi
export PATH

# Uncomment the following line if you don't like systemctl's auto-paging feature:
# export SYSTEMD_PAGER=

# User specific aliases and functions

PS1='\u@\h \[\033[32m\]\w\[\033[33m\]$(git branch 2> /dev/null |sed -e "/^[^*]/d" -e "s/* \(.*\)/ (\1)/")\[\033[00m\]$ '

# User specific aliases and functions
HISTCONTROL=ignoreboth:erasedups # append to the history file, don't overwrite it
shopt -s histappend # for setting history length see HISTSIZE and HISTFILESIZE in bash(1)
HISTSIZE=999999
HISTFILESIZE=9999999
HISTTIMEFORMAT="[%F %T] "

# to ensure Git will store its config and credentials file under ~/.config/git directory
export XDG_CONFIG_HOME=/home/vagrant/.config

[ -s "$HOME/.tools/tools-init.sh" ] && \. "$HOME/.tools/tools-init.sh"

#THIS MUST BE AT THE END OF THE FILE FOR SDKMAN TO WORK!!!
export SDKMAN_DIR="$HOME/.sdkman"
[[ -s "$HOME/.sdkman/bin/sdkman-init.sh" ]] && source "$HOME/.sdkman/bin/sdkman-init.sh"
[ -s "$HOME/.tools/tools-init.sh" ] && \. "$HOME/.tools/tools-init.sh"
source <(kubectl completion bash)
export PATH="${KREW_ROOT:-$HOME/.krew}/bin:$PATH"
export PATH="${GO_PATH:-$HOME/go}/bin:$PATH"
[ -s "$HOME/.tools/tools-init.sh" ] && \. "$HOME/.tools/tools-init.sh"

export MINIKUBE_WANTUPDATENOTIFICATION=false
export MINIKUBE_WANTREPORTERRORPROMPT=false
export MINIKUBE_HOME=$HOME
export CHANGE_MINIKUBE_NONE_USER=true
export KUBECONFIG=$HOME/.kube/config

alias k=kubectl
alias kx=kubectx
alias kc="kubectx -c"

alias ci09="kubectx gke_"



alias constraint="kubectl get constraint"
alias constrainttemplates="kubectl get constrainttemplates"
alias pc-version="kubectl get deployments -n gatekeeper-system gatekeeper-controller-manager   -o="jsonpath={.spec.template.spec.containers[0].image}""

complete -F __start_kubectl k

#source <(kubectl completion bash) # setup autocomplete in bash into the current shell, bash-completion package should be installed first.
#echo "source <(kubectl completion bash)" >> ~/.bashrc # add autocomplete permanently to your bash shell.

source <(velero completion bash)
alias v=velero
complete -F __start_velero v

